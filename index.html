<html>
<head>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
</head>
<body>


    <form>
        <input type="submit" />
    </form>



    <script>
          

        $(document).ready(function(){

            var ipAddr;          

          
                $.ajax({
                    type: "GET",
                    url: "http://geoapi.bcapps.org/?type=json",
                    dataType: "json",
                    async: "true",          
                    success: function(result) {

                        //alert(result.ipAddress);
                        //alert(result);
                        ipAddr = result.ipAddress;
                        alert(ipAddr);

                        //return ipAddr2;
                    },
                    error: function() {
                        alert("Talep esnasında sorun oluştu. Yeniden deneyin");
                        
                        ipAddr = "";
                    },                  
                   
                });

           


            $("form").submit(function () {
                //var ip = IpAddr();
                //alert(IpAddr());
                alert(IpAddr());
            });

        });
       

    </script>

</body>
</html>